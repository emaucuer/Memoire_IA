ifelse(evol_26 < 2, 4,
ifelse(evol_26 < 10, 5, 6))))))),
evol_cat_45 = ifelse(evol_45 == Inf, Inf,
ifelse(evol_45 < -0.5, 0,
ifelse(evol_45 < -0.2, 1,
ifelse(evol_45 < 0.2, 2,
ifelse(evol_45 < 1, 3,
ifelse(evol_45 < 2, 4,
ifelse(evol_45 < 10, 5, 6))))))),
evol_cat_85 = ifelse(evol_85 == Inf, Inf,
ifelse(evol_85 < -0.5, 0,
ifelse(evol_85 < -0.2, 1,
ifelse(evol_85 < 0.2, 2,
ifelse(evol_85 < 1, 3,
ifelse(evol_85 < 2, 4,
ifelse(evol_85 < 10, 5, 6)))))))) %>%
merge(dep_bound, by.x="dep", by.y="code", all.y = T)
delta_dep$evol_cat_26 <- ordered(delta_dep$evol_cat_26,
levels = 0:6,
labels = c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"+200% à +1000%",
"> +1000%"))
delta_dep$evol_cat_45 <- ordered(delta_dep$evol_cat_45,
levels = 0:6,
labels =c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"+200% à +1000%",
"> +1000%"))
delta_dep$evol_cat_85 <- ordered(delta_dep$evol_cat_85,
levels = 0:6,
labels = c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"+200% à +1000%",
"> +1000%"))
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_45), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#ef8a62','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_45), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
delta_dep <- delta_freq_all %>%
mutate(dep = substr(id,1,2)) %>%
group_by(dep) %>%
summarise(freq = sum(freq),
delta15_26 = sum(delta15_26),
delta15_45 = sum(delta15_45),
delta15_85 = sum(delta15_85),
delta_26 = sum(delta_26),
delta_45 = sum(delta_45),
delta_85 = sum(delta_85)) %>%
mutate(evol_26 = delta_26/freq,
evol_45 = delta_45/freq,
evol_85 = delta_85/freq) %>%
mutate(evol_cat_26 = ifelse(evol_26 == Inf, Inf,
ifelse(evol_26 < -0.5, 0,
ifelse(evol_26 < -0.2, 1,
ifelse(evol_26 < 0.2, 2,
ifelse(evol_26 < 1, 3,
ifelse(evol_26 < 2, 4,5)))))),
evol_cat_45 = ifelse(evol_45 == Inf, Inf,
ifelse(evol_45 < -0.5, 0,
ifelse(evol_45 < -0.2, 1,
ifelse(evol_45 < 0.2, 2,
ifelse(evol_45 < 1, 3,
ifelse(evol_45 < 2, 4, 5)))))),
evol_cat_85 = ifelse(evol_85 == Inf, Inf,
ifelse(evol_85 < -0.5, 0,
ifelse(evol_85 < -0.2, 1,
ifelse(evol_85 < 0.2, 2,
ifelse(evol_85 < 1, 3,
ifelse(evol_85 < 2, 4, 5))))))) %>%
merge(dep_bound, by.x="dep", by.y="code", all.y = T)
delta_dep$evol_cat_26 <- ordered(delta_dep$evol_cat_26,
levels = 0:5,
labels = c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"> +200%"))
delta_dep$evol_cat_45 <- ordered(delta_dep$evol_cat_45,
levels = 0:5,
labels =c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"> +1000%"))
delta_dep$evol_cat_85 <- ordered(delta_dep$evol_cat_85,
levels = 0:5,
labels = c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"> +200%"))
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_45), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
delta_dep$evol_cat_45 <- ordered(delta_dep$evol_cat_45,
levels = 0:5,
labels =c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"> +200%"))
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_45), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
delta_dep <- delta_freq_all %>%
mutate(dep = substr(id,1,2)) %>%
group_by(dep) %>%
summarise(freq = sum(freq),
delta15_26 = sum(delta15_26),
delta15_45 = sum(delta15_45),
delta15_85 = sum(delta15_85),
delta_26 = sum(delta_26),
delta_45 = sum(delta_45),
delta_85 = sum(delta_85)) %>%
mutate(evol_26 = delta_26/freq,
evol_45 = delta_45/freq,
evol_85 = delta_85/freq) %>%
mutate(evol_cat_26 = ifelse(evol_26 == Inf, Inf,
ifelse(evol_26 < -0.5, 0,
ifelse(evol_26 < -0.2, 1,
ifelse(evol_26 < 0.2, 2,
ifelse(evol_26 < 1, 3,
ifelse(evol_26 < 2, 4,5)))))),
evol_cat_45 = ifelse(evol_45 == Inf, Inf,
ifelse(evol_45 < -0.5, 0,
ifelse(evol_45 < -0.2, 1,
ifelse(evol_45 < 0.2, 2,
ifelse(evol_45 < 1, 3,
ifelse(evol_45 < 2, 4, 5)))))),
evol_cat_85 = ifelse(evol_85 == Inf, Inf,
ifelse(evol_85 < -0.5, 0,
ifelse(evol_85 < -0.2, 1,
ifelse(evol_85 < 0.2, 2,
ifelse(evol_85 < 1, 3,
ifelse(evol_85 < 2, 4, 5))))))) %>%
merge(dep_bound, by.x="dep", by.y="code", all.y = T)
delta_dep$evol_cat_26 <- ordered(delta_dep$evol_cat_26,
levels = 0:5,
labels = c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"> +200%"))
delta_dep$evol_cat_45 <- ordered(delta_dep$evol_cat_45,
levels = 0:5,
labels =c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"> +200%"))
delta_dep$evol_cat_85 <- ordered(delta_dep$evol_cat_85,
levels = 0:5,
labels = c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"> +200%"))
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_45), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_85), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_85), color = NA) +
scale_fill_manual(values = c('#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_26), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_45), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_85), color = NA) +
scale_fill_manual(values = c('#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_26), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Evolution de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_45), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Evolution de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_85), color = NA) +
scale_fill_manual(values = c('#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Evolution de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
delta_dep <- delta_freq_all %>%
mutate(dep = substr(id,1,2)) %>%
group_by(dep) %>%
summarise(freq = sum(freq),
delta15_26 = sum(delta15_26),
delta15_45 = sum(delta15_45),
delta15_85 = sum(delta15_85),
delta_26 = sum(delta_26),
delta_45 = sum(delta_45),
delta_85 = sum(delta_85)) %>%
mutate(evol_26 = delta_26/freq,
evol_45 = delta_45/freq,
evol_85 = delta_85/freq) %>%
mutate(evol_cat_26 = ifelse(evol_26 == Inf, Inf,
ifelse(evol_26 < -0.5, 0,
ifelse(evol_26 < -0.2, 1,
ifelse(evol_26 < 0.2, 2,
ifelse(evol_26 < 1, 3,
ifelse(evol_26 < 2, 4,
ifelse(evol_26 < 10, 5, 6))))))),
evol_cat_45 = ifelse(evol_45 == Inf, Inf,
ifelse(evol_45 < -0.5, 0,
ifelse(evol_45 < -0.2, 1,
ifelse(evol_45 < 0.2, 2,
ifelse(evol_45 < 1, 3,
ifelse(evol_45 < 2, 4,
ifelse(evol_45 < 10, 5, 6))))))),
evol_cat_85 = ifelse(evol_85 == Inf, Inf,
ifelse(evol_85 < -0.5, 0,
ifelse(evol_85 < -0.2, 1,
ifelse(evol_85 < 0.2, 2,
ifelse(evol_85 < 1, 3,
ifelse(evol_85 < 2, 4,
ifelse(evol_85 < 10, 5, 6)))))))) %>%
merge(dep_bound, by.x="dep", by.y="code", all.y = T)
delta_dep$evol_cat_26 <- ordered(delta_dep$evol_cat_26,
levels = 0:6,
labels = c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"+200% à +1000%",
"> +1000%"))
delta_dep$evol_cat_45 <- ordered(delta_dep$evol_cat_45,
levels = 0:6,
labels =c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"+200% à +1000%",
"> +1000%"))
delta_dep$evol_cat_85 <- ordered(delta_dep$evol_cat_85,
levels = 0:6,
labels = c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"+200% à +1000%",
"> +1000%"))
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_85), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_45), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_85), color = NA) +
scale_fill_manual(values = c('#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Delta de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_45), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Evolution de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_85), color = NA) +
scale_fill_manual(values = c('#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Evolution de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_26), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Evolution de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_45), color = NA) +
scale_fill_manual(values = c('#67a9cf','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Evolution de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_45), color = NA) +
scale_fill_manual(values = c('#92c5de','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Evolution de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_26), color = NA) +
scale_fill_manual(values = c('#92c5de','#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Evolution de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
Côteggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_85), color = NA) +
scale_fill_manual(values = c('#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Evolution de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
ggplot(data=delta_dep) +
geom_sf(aes(geometry = geometry, fill = evol_cat_85), color = NA) +
scale_fill_manual(values = c('#d1e5f0','white','#fddbc7',"#f4a582",'#d6604d','#b2182b'), name = "Evolution de fréquence") +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey70", fill = NA) +
theme_void()
mean(delta_dep$evol_26)
mean(is.finite(delta_dep$evol_26))
mean(is.finite(delta_dep$evol_45))
mean(is.finite(delta_dep$evol_85))
mean(delta_dep %>% filter(is.finit(evol_26)) %>% select(evol_26))
mean(delta_dep %>% filter(is.finite(evol_26)) %>% select(evol_26))
summary(delta_dep %>% filter(is.finite(evol_26)) %>% select(evol_26))
summary(delta_dep %>% filter(is.finite(evol_26)) %>% select(evol_45))
summary(delta_dep %>% filter(is.finite(evol_26)) %>% select(evol_85))
delta_dep <- delta_freq_all %>%
mutate(dep = substr(id,1,2)) %>%
group_by(dep) %>%
summarise(freq = sum(freq),
freq15 = sum(freq15),
delta15_26 = sum(delta15_26),
delta15_45 = sum(delta15_45),
delta15_85 = sum(delta15_85),
delta_26 = sum(delta_26),
delta_45 = sum(delta_45),
delta_85 = sum(delta_85)) %>%
mutate(evol_26 = delta_26/freq,
evol_45 = delta_45/freq,
evol_85 = delta_85/freq,
evol15_26 = delta15_26/freq,
evol15_45 = delta15_45/freq,
evol15_85 = delta15_85/freq) %>%
mutate(evol_cat_26 = ifelse(evol_26 == Inf, Inf,
ifelse(evol_26 < -0.5, 0,
ifelse(evol_26 < -0.2, 1,
ifelse(evol_26 < 0.2, 2,
ifelse(evol_26 < 1, 3,
ifelse(evol_26 < 2, 4,
ifelse(evol_26 < 10, 5, 6))))))),
evol_cat_45 = ifelse(evol_45 == Inf, Inf,
ifelse(evol_45 < -0.5, 0,
ifelse(evol_45 < -0.2, 1,
ifelse(evol_45 < 0.2, 2,
ifelse(evol_45 < 1, 3,
ifelse(evol_45 < 2, 4,
ifelse(evol_45 < 10, 5, 6))))))),
evol_cat_85 = ifelse(evol_85 == Inf, Inf,
ifelse(evol_85 < -0.5, 0,
ifelse(evol_85 < -0.2, 1,
ifelse(evol_85 < 0.2, 2,
ifelse(evol_85 < 1, 3,
ifelse(evol_85 < 2, 4,
ifelse(evol_85 < 10, 5, 6)))))))) %>%
merge(dep_bound, by.x="dep", by.y="code", all.y = T)
delta_dep$evol_cat_26 <- ordered(delta_dep$evol_cat_26,
levels = 0:6,
labels = c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"+200% à +1000%",
"> +1000%"))
delta_dep$evol_cat_45 <- ordered(delta_dep$evol_cat_45,
levels = 0:6,
labels =c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"+200% à +1000%",
"> +1000%"))
delta_dep$evol_cat_85 <- ordered(delta_dep$evol_cat_85,
levels = 0:6,
labels = c("< -50%",
"-50% à -20%",
"-20% à +20%",
"+20% à +100%",
"+100% à +200%",
"+200% à +1000%",
"> +1000%"))
summary(delta_dep %>% filter(is.finite(evol_26)) %>% select(evol15_85))
summary(delta_dep %>% filter(is.finite(evol_26)) %>% select(evol15_45))
summary(delta_dep %>% filter(is.finite(evol_26)) %>% select(evol15_26*))
summary(delta_dep %>% filter(is.finite(evol_26)) %>% select(evol15_26))
# Libraries --------------------------------------------------------------------
library(dplyr)
library(readxl)
library(readr)
library(stringr)
library(ggplot2)
library(leaflet)
library(RColorBrewer)
# -----------------------------------------------------------------------------#
# Données carto ----------------------------------------------------------------
# -----------------------------------------------------------------------------#
com_bound_wo_om <- read_rds("../Data_GIS/geojson/communes-vs.rds")
#com_bound_om <- read_rds("../Data_GIS/geojson/communes-vs_-om.rds")
#com_bound2 <- sf::st_read("../Data_GIS/OpenStreetMap/communes-20220101.shp")
dep_bound <- readRDS("../Data_GIS/geojson/departements-vs-om.rds") %>%
filter(code<=95)
#com_bound_om <- read_rds("../Data_GIS/geojson/communes-vs_-om.rds")
#com_bound2 <- sf::st_read("../Data_GIS/OpenStreetMap/communes-20220101.shp")
dep_bound <- readRDS("../Data_GIS/geojson/departements-vs-om.rds") %>%
filter(code<=95)
#com_bound_om <- read_rds("../Data_GIS/geojson/communes-vs_-om.rds")
#com_bound2 <- sf::st_read("../Data_GIS/OpenStreetMap/communes-20220101.shp")
dep_bound <- read_rds("../Data_GIS/geojson/departements-vs-om.rds") %>%
filter(code<=95)
# -----------------------------------------------------------------------------#
# Données ONRN -----------------------------------------------------------------
# -----------------------------------------------------------------------------#
cumul_ino <- read_xlsx("../Data/ONRN/ONRN_CoutCommune_Inondation/ONRN_CoutCum_Inon_9518.xlsx")
cumul_sec <- read_xlsx("../Data/ONRN/ONRN_CoutCommune_Sech/ONRN_CoutCum_Sech_9518.xlsx")
names(cumul_ino) <- c("code_insee","commune","cout")
names(cumul_sec) <- c("code_insee","commune","cout")
library(readr)
library(dplyr)
library(tidyr)
library(data.table)
library(ggplot2)
library(plotly)
library(sf)
# Chargement des donnees ------------------------------------
# Data plot
com_bound <- read_rds("../Data_GIS/geojson/communes-vs.rds")
dep_bound <- read_rds("../Data_GIS/geojson/departements-vs-om.rds") %>%
dplyr::filter(code<=95)
# Data gaspar AZI
azi <- read_csv2("../Data/CATNAT/gaspar/azi_gaspar.csv")
azi <- azi %>%
arrange(cod_commune, desc(dat_diffusion)) %>%
mutate(indic_azi = "Oui") %>%
distinct(cod_commune, .keep_all = T)
aziPlot <- com_bound %>% merge(azi, by.y="cod_commune", by.x = "code", all.x=T)
aziPlot <- aziPlot %>% mutate(indic_azi = ifelse(is.na(indic_azi), "Non", indic_azi))
#png("../Plots&Resultats/exposition_risques/map_azi.png", units="in", width=8.5, height=5, res=300)
ggplot(data=aziPlot) +
geom_sf(aes(geometry = geometry,fill = as.factor(indic_azi)), color = NA) +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey40", fill = NA) +
scale_fill_manual(values =c('white','#1DE9B6')) +
theme_void() +
guides(fill=guide_legend(title="Commune concernée par \nun Atlas de Zone Inondable"))
#png("../Plots&Resultats/exposition_risques/map_azi.png", units="in", width=8.5, height=5, res=300)
ggplot(data=aziPlot) +
geom_sf(aes(geometry = geometry,fill = as.factor(indic_azi)), color = NA) +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey40", fill = NA) +
scale_fill_manual(values =c('white','#084594')) +
theme_void() +
guides(fill=guide_legend(title="Commune concernée par \nun Atlas de Zone Inondable"))
#png("../Plots&Resultats/exposition_risques/map_azi.png", units="in", width=8.5, height=5, res=300)
ggplot(data=aziPlot) +
geom_sf(aes(geometry = geometry,fill = as.factor(indic_azi)), color = NA) +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey40", fill = NA) +
scale_fill_manual(values =c('white','#4292c6')) +
theme_void() +
guides(fill=guide_legend(title="Commune concernée par \nun Atlas de Zone Inondable"))
#png("../Plots&Resultats/exposition_risques/map_azi.png", units="in", width=8.5, height=5, res=300)
ggplot(data=aziPlot) +
geom_sf(aes(geometry = geometry,fill = as.factor(indic_azi)), color = NA) +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey40", fill = NA) +
scale_fill_manual(values =c('white','#08519c')) +
theme_void() +
guides(fill=guide_legend(title="Commune concernée par \nun Atlas de Zone Inondable"))
png("../Plots&Resultats/exposition_risques/map_azi.png", units="in", width=8.5, height=5, res=300)
ggplot(data=aziPlot) +
geom_sf(aes(geometry = geometry,fill = as.factor(indic_azi)), color = NA) +
geom_sf(data = dep_bound, aes(geometry = geometry), color="grey40", fill = NA) +
scale_fill_manual(values =c('white','#4292c6')) +
theme_void() +
guides(fill=guide_legend(title="Commune concernée par \nun Atlas de Zone Inondable"))
dev.off()
